<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><p><h1 align=center> üë©‚Äçüíº Stanager (stan) </h1></p>
<p align=center><em>Stanager is an immutable state manager with subscribe and unsubscribe features based on https://git.io/Valoo</em></p>

<p><p align=center><img width=650 alt='Screenshot of stanager in action via carbon.now.sh' src='Screenshots/stanager-carbon.png' /></p></p>
<h2>Installation</h2><pre class="prettyprint source lang-bash"><code>npm i stanager</code></pre><h2>Usage</h2><p>Hotlink it from <strong>https://unpkg.com/stanager</strong>, or if you need to use ES6 modules try <strong>https://unpkg.com/stanager/index.mjs</strong>.</p>
<pre class="prettyprint source lang-js"><code>const stan = require('stanager')
// or
import stan from 'stanager'
// or
import stan from 'https://unpkg.com/stanager'
// or
import stan from 'https://unpkg.com/stanager/index.mjs'

// create an observable value:
const shoppingCart = stan(['bread'])

// assign new value:
shoppingCart.value = shoppingCart.value.concat(['meatballs', 'flat bread'])

// create listener function:
const changeLogger = (newCart, oldCart) => {
  const changes = {
    removed: oldCart.filter(item => newCart.indexOf(item) === -1),
    added: newCart.filter(item => oldCart.indexOf(item) === -1),
  }

  changes.removed.forEach(item => console.log(`removed: '${item}'`))
  changes.added.forEach(item => console.log(`added: '${item}'`))
}

// subscribe to changes:
shoppingCart.subscribe(changeLogger)

// invoke listener(s):
shoppingCart.value = shoppingCart.value.filter(item => item.indexOf('bread') === -1).concat('marinara sauce')

/* output:

removed: 'bread'
removed: 'flat bread'
added: 'marinara sauce'

*/

// get current value:
shoppingCart.value</code></pre><h3>Version 1.1.0</h3><p>You not only have <em>listeners</em>, but you also have <strong><em>modifiers</em></strong>. These are created the same way as listeners, but instead of just passing the function to <code>subscribe()</code>, you also need to pass in <code>true</code> as the second argument. <code>subscribe(func, true)</code> creates a modifier.</p>
<pre class="prettyprint source lang-js"><code>// create an observabe value:
const shoppingCart = stan({
  products: [],
})

let discount = 1 - 0.25 // 25% off

// create modifier function
const discountApplier = cart => ({
  ...cart,
  products: cart.products.map(product => ({
    ...product,
    discount: product.discount || product.price * discount,
  })),
})

// subscribe to changes and modify them
shoppingCart.subscribe(discountApplier, true)

let currentCart = shoppingCart.value
currentCart.products.push({
  name: 'blouse',
  price: 38
})

// assign new value
shoppingCart.value = currentCart

/* output:

{
  products: [{
    name: 'blouse',
    price: 38,
    discount: 28.5
  }]
}

*/

// unsubscribe modifier
shoppingCart.unsubscribe(discountApplier)</code></pre><h2>How it works:</h2><p>When you run <code>stan(value)</code> it returns an object with four methods:</p>
<pre class="prettyprint source lang-js"><code>{
  subscribe(...) {...},
  unsubscribe(...) {...},
  get value() {...},
  set value(...) {...},
}</code></pre><p>You can use these four methods to <em>listen</em>, and <em>unlisten</em> to value changes, and to <em>set/get</em> the value, as per their names. However, you <strong>cannot</strong> mutate the data, hence the term immutable. Even if you pass in an array or object and you change some stuff elsewhere, it won't affect this because everything is recursively copied.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#copyOf">copyOf</a></li><li><a href="global.html#stan">stan</a></li><li><a href="global.html#subscribe">subscribe</a></li><li><a href="global.html#unsubscribe">unsubscribe</a></li><li><a href="global.html#value">value</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Jul 14 2018 16:25:23 GMT-0600 (MDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>